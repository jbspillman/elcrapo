<!DOCTYPE html>
<html>
<head>
    <title>Version Comparison Charts</title>
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
</head>
<body>

    <h3>
    Versions: "WCX10.1.33"  vs. "WCX11.2.19"
    </h3>
    <hr>
    <table border="1">
        <tr>
            <th colspan="9">Sequential Writes</th>
        </tr>
        <tr>
            <td><div id="chartContainer_iops_sw" style="height: 200px; width: 400px;"></div></td>
            <td><div id="chartContainer_mibs_sw" style="height: 200px; width: 400px;"></div></td>
            <td><div id="chartContainer_lat_sw" style="height: 200px; width: 400px;"></div></td>
        </tr>

        <tr>
            <th colspan="9">Sequential Reads</th>
        </tr>
        <tr>
            <td><div id="chartContainer_iops_sr" style="height: 200px; width: 400px;"></div></td>
            <td><div id="chartContainer_mibs_sr" style="height: 200px; width: 400px;"></div></td>
            <td><div id="chartContainer_lat_sr" style="height: 200px; width: 400px;"></div></td>
        </tr>

        <tr>
            <th colspan="9">Random Writes</th>
        </tr>
        <tr>
            <td><div id="chartContainer_iops_rw" style="height: 200px; width: 400px;"></div></td>
            <td><div id="chartContainer_mibs_rw" style="height: 200px; width: 400px;"></div></td>
            <td><div id="chartContainer_lat_rw" style="height: 200px; width: 400px;"></div></td>
        </tr>

        <tr>
            <th colspan="9">Random Reads</th>
        </tr>
        <tr>
            <td><div id="chartContainer_iops_rr" style="height: 200px; width: 400px;"></div></td>
            <td><div id="chartContainer_mibs_rr" style="height: 200px; width: 400px;"></div></td>
            <td><div id="chartContainer_lat_rr" style="height: 200px; width: 400px;"></div></td>
        </tr>

    </table>

    <script>
        // Grouped data for charts,

        // Sequential Writes....
        const groupedData_sw = {'1': {'WCX11.2.19': {'iops': 1156.0, 'mibs': 1156.0, 'lat': 864.0}, 'WCX10.1.33': {'iops': 1220.0, 'mibs': 1220.0, 'lat': 818.0}}, '2': {'WCX11.2.19': {'iops': 2304.0, 'mibs': 2304.0, 'lat': 866.0}, 'WCX10.1.33': {'iops': 2366.0, 'mibs': 2366.0, 'lat': 840.0}}, '4': {'WCX11.2.19': {'iops': 4335.0, 'mibs': 4335.0, 'lat': 909.0}, 'WCX10.1.33': {'iops': 4492.0, 'mibs': 4492.0, 'lat': 879.0}}, '8': {'WCX11.2.19': {'iops': 6265.0, 'mibs': 6265.0, 'lat': 1095.0}, 'WCX10.1.33': {'iops': 6646.0, 'mibs': 6646.0, 'lat': 1035.0}}, '16': {'WCX11.2.19': {'iops': 7235.0, 'mibs': 7235.0, 'lat': 1614.0}, 'WCX10.1.33': {'iops': 7053.0, 'mibs': 7053.0, 'lat': 1667.0}}};

        // Sequential Reads....
        const groupedData_sr = {'1': {'WCX10.1.33': {'iops': 13080.0, 'mibs': 13080.0, 'lat': 75.0}, 'WCX11.2.19': {'iops': 12691.0, 'mibs': 12691.0, 'lat': 78.0}}, '2': {'WCX10.1.33': {'iops': 21080.0, 'mibs': 21080.0, 'lat': 93.0}, 'WCX11.2.19': {'iops': 19685.0, 'mibs': 19685.0, 'lat': 99.0}}, '4': {'WCX10.1.33': {'iops': 22068.0, 'mibs': 22068.0, 'lat': 176.0}, 'WCX11.2.19': {'iops': 23464.0, 'mibs': 23464.0, 'lat': 168.0}}, '8': {'WCX10.1.33': {'iops': 20862.0, 'mibs': 20862.0, 'lat': 353.0}, 'WCX11.2.19': {'iops': 23174.0, 'mibs': 23174.0, 'lat': 320.0}}, '16': {'WCX10.1.33': {'iops': 20398.0, 'mibs': 20398.0, 'lat': 656.0}, 'WCX11.2.19': {'iops': 21378.0, 'mibs': 21378.0, 'lat': 615.0}}};

        // Random Writes....
        const groupedData_rw = {'1': {'WCX10.1.33': {'iops': 218917.0, 'mibs': 855.0, 'lat': 3.0}, 'WCX11.2.19': {'iops': 217696.0, 'mibs': 850.0, 'lat': 4.0}}, '2': {'WCX10.1.33': {'iops': 434048.0, 'mibs': 1695.0, 'lat': 4.0}, 'WCX11.2.19': {'iops': 436722.0, 'mibs': 1705.0, 'lat': 3.0}}, '4': {'WCX10.1.33': {'iops': 868679.0, 'mibs': 3393.0, 'lat': 3.0}, 'WCX11.2.19': {'iops': 857528.0, 'mibs': 3349.0, 'lat': 4.0}}, '8': {'WCX10.1.33': {'iops': 1382429.0, 'mibs': 5400.0, 'lat': 4.0}, 'WCX11.2.19': {'iops': 1395545.0, 'mibs': 5451.0, 'lat': 4.0}}, '16': {'WCX10.1.33': {'iops': 1694992.0, 'mibs': 6621.0, 'lat': 8.0}, 'WCX11.2.19': {'iops': 1762329.0, 'mibs': 6884.0, 'lat': 7.0}}};

        // Random Reads ....
        const groupedData_rr = {'1': {'WCX11.2.19': {'iops': 560730.0, 'mibs': 2190.0, 'lat': 1.0}, 'WCX10.1.33': {'iops': 545015.0, 'mibs': 2128.0, 'lat': 1.0}}, '2': {'WCX11.2.19': {'iops': 1080437.0, 'mibs': 4220.0, 'lat': 1.0}, 'WCX10.1.33': {'iops': 1078073.0, 'mibs': 4211.0, 'lat': 1.0}}, '4': {'WCX11.2.19': {'iops': 2012505.0, 'mibs': 7861.0, 'lat': 1.0}, 'WCX10.1.33': {'iops': 2049244.0, 'mibs': 8004.0, 'lat': 1.0}}, '8': {'WCX11.2.19': {'iops': 2929339.0, 'mibs': 11442.0, 'lat': 2.0}, 'WCX10.1.33': {'iops': 2970246.0, 'mibs': 11602.0, 'lat': 1.0}}, '16': {'WCX11.2.19': {'iops': 2923906.0, 'mibs': 11421.0, 'lat': 3.0}, 'WCX10.1.33': {'iops': 2997436.0, 'mibs': 11708.0, 'lat': 3.0}}}

        // Extract unique target names per test groups.
        const targets_sw = [...new Set(Object.values(groupedData_sw).flatMap(d => Object.keys(d)))];
        const targets_sr = [...new Set(Object.values(groupedData_sr).flatMap(d => Object.keys(d)))];
        const targets_rw = [...new Set(Object.values(groupedData_rw).flatMap(d => Object.keys(d)))];
        const targets_rr = [...new Set(Object.values(groupedData_rr).flatMap(d => Object.keys(d)))];

        // Create series for each target and metric

        // ---------------------------------------------------------------------------------------

        const dataSeries_iops_sw = targets_sw.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_sw).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.iops || 0
            }))
        }));

        const dataSeries_mibs_sw = targets_sw.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_sw).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.mibs || 0
            }))
        }));

        const dataSeries_lat_sw = targets_sw.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_sw).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.lat || 0
            }))
        }));

        // ---------------------------------------------------------------------------------------

        const dataSeries_iops_sr = targets_sr.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_sr).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.iops || 0
            }))
        }));

        const dataSeries_mibs_sr = targets_sr.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_sr).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.mibs || 0
            }))
        }));

        const dataSeries_lat_sr = targets_sr.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_sr).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.lat || 0
            }))
        }));

        // ---------------------------------------------------------------------------------------

        const dataSeries_iops_rw = targets_rw.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_rw).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.iops || 0
            }))
        }));

        const dataSeries_mibs_rw = targets_rw.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_rw).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.mibs || 0
            }))
        }));

        const dataSeries_lat_rw = targets_rw.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_rw).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.lat || 0
            }))
        }));

        // ---------------------------------------------------------------------------------------

        const dataSeries_iops_rr = targets_rr.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_rr).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.iops || 0
            }))
        }));

        const dataSeries_mibs_rr = targets_rr.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_rr).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.mibs || 0
            }))
        }));

        const dataSeries_lat_rr = targets_rr.map(target => ({
            type: "column",
            indexLabel: "{y}",
            indexLabelFontFamily: "tahoma",
            indexLabelPlacement: "outside",
            indexLabelOrientation: "horizontal",
            name: target,
            showInLegend: true,
            dataPoints: Object.entries(groupedData_rr).map(([threads, targetsData]) => ({
                label: `${threads} Threads`,
                y: targetsData[target]?.lat || 0
            }))
        }));

        // ---------------------------------------------------------------------------------------
        // CHARTS
        // ---------------------------------------------------------------------------------------

        const chart_iops_sw = new CanvasJS.Chart("chartContainer_iops_sw", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "IOPS",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "IOPS"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_iops_sw
        });
        chart_iops_sw.render();

        const chart_mibs_sw = new CanvasJS.Chart("chartContainer_mibs_sw", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "MiB's",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "MiB's"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_mibs_sw
        });
        chart_mibs_sw.render();

        const chart_lat_sw = new CanvasJS.Chart("chartContainer_lat_sw", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "Latency [us] Average",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "us"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_lat_sw
        });
        chart_lat_sw.render();

        // ---------------------------------------------------------------------------------------

        const chart_iops_sr = new CanvasJS.Chart("chartContainer_iops_sr", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "IOPS",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "IOPS"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_iops_sr
        });
        chart_iops_sr.render();

        const chart_mibs_sr = new CanvasJS.Chart("chartContainer_mibs_sr", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "MiB's",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "MiB's"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_mibs_sr
        });
        chart_mibs_sr.render();

        const chart_lat_sr = new CanvasJS.Chart("chartContainer_lat_sr", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "Latency [us] Average",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "us"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_lat_sr
        });
        chart_lat_sr.render();

        // ---------------------------------------------------------------------------------------

        const chart_iops_rw = new CanvasJS.Chart("chartContainer_iops_rw", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "IOPS",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "IOPS"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_iops_rw
        });
        chart_iops_rw.render();

        const chart_mibs_rw = new CanvasJS.Chart("chartContainer_mibs_rw", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "MiB's",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "MiB's"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_mibs_rw
        });
        chart_mibs_rw.render();

        const chart_lat_rw = new CanvasJS.Chart("chartContainer_lat_rw", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "Latency [us] Average",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "us"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_lat_rw
        });
        chart_lat_rw.render();

        // ---------------------------------------------------------------------------------------

        const chart_iops_rr = new CanvasJS.Chart("chartContainer_iops_rr", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "IOPS",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "IOPS"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_iops_rr
        });
        chart_iops_rr.render();

        const chart_mibs_rr = new CanvasJS.Chart("chartContainer_mibs_rr", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "MiB's",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "MiB's"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_mibs_rr
        });
        chart_mibs_rr.render();

        const chart_lat_rr = new CanvasJS.Chart("chartContainer_lat_rr", {
            animationEnabled: true,
            // title: {
               //  text: ""
            // },
            subtitles: [
                {
                    text: "Latency [us] Average",
                    fontSize: 14,
                    verticalAlign: "top",
                    fontColor: "rgba(0,0,0,0.5)"
                }
            ],
            axisY: {
                title: "us"
            },
            axisX: {
                title: "Threads"
            },
            legend: {
                cursor: "pointer"
            },
            toolTip: {
                shared: true
            },
            data: dataSeries_lat_rr
        });
        chart_lat_rr.render();

        // ---------------------------------------------------------------------------------------

    </script>
</body>
</html>
